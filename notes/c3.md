## 3 语法分析器

### 3.1 简介

语法分析器：识别输入代码是否是一个有效的字句，是否有效是通过上下文无关文法定义

### 3.2 语法的表示

上下文无关语法（Context-Free Grammar，CFG）：

非终结符（nonterminal symbol）：

终结符（terminal symbol）：

产生式：定义非终结符是如何产生的，可以由非终结符和终结符产生

二义性：存在一个以上的最右（最左）推导。比如：

```c++
// 在Clang中会给出警告，运行时认为else属于里面的if语句
// 同样的源码，第一种缩进方式
if (a > 0)
  if (b > 0)
    c = 1;
	else
    c = 2;

// 同样的源码，第二种缩进方式
if (a > 0)
  if (b > 0)
    c = 1;
else
  c = 2;
```



### 3.3 自顶向下语法分析

从根节点开始构建语法树，使用最左推导。关键问题是如何选择正确的产生式：

1. 左递归消除：直接左递归消除和间接左递归消除（引入了空输入）
2. 无回溯语法（预测性语法）：关键是寻找到非终结符的第一个字符或者接着该终结符的字符（如果终结符允许空输入的话）

LL(1)语法分析器



### 3.4 自底向上语法分析

从叶子节点开始构造语法书，使用最右推导。关键点：

1. LR(1)语法定义
2. Action和Goto表生成

```
Goal -> List
List -> List Pair
			| Pair
Pair -> (Pair)
			| ()

e.g. // 有效括号组成的字符串
()
(())()
```

